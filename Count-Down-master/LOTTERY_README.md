# 飞书抽奖插件使用说明

## 项目概述

这是一个基于飞书自定义仪表盘插件的抽奖系统，在原有倒计时功能基础上新增了抽奖加载界面功能。

## 功能特性

### 🎯 抽奖功能
- **动态抽奖动画**：点击开始抽奖后，选项会快速滚动，营造紧张刺激的抽奖氛围
- **可配置选项**：支持自定义抽奖选项，用逗号分隔
- **动画控制**：可调整抽奖持续时间和动画速度
- **结果展示**：抽奖结束后显示获奖结果，支持重新抽奖

### 🎨 界面设计
- **响应式设计**：适配不同屏幕尺寸
- **主题支持**：支持飞书明暗主题切换
- **动画效果**：丰富的CSS动画效果，包括脉冲、发光、弹跳等
- **现代化UI**：使用Semi Design组件库，界面美观现代

### ⚙️ 配置选项
- **抽奖选项**：自定义抽奖内容
- **标题设置**：可配置抽奖标题
- **按钮文字**：自定义开始按钮文字
- **显示控制**：控制标题和按钮的显示/隐藏
- **时间设置**：调整抽奖持续时间和动画速度
- **颜色主题**：支持自定义颜色主题

## 技术架构

### 核心技术栈
- **React 18** + **TypeScript**：现代化前端开发
- **Semi Design**：字节跳动开源UI组件库
- **飞书开放平台SDK**：与飞书平台深度集成
- **SCSS**：样式预处理，支持变量和嵌套
- **i18next**：国际化支持

### 组件结构
```
src/
├── components/
│   ├── Lottery/           # 抽奖核心组件
│   │   ├── index.tsx     # 主组件逻辑
│   │   └── style.scss    # 样式文件
│   ├── CountDown/         # 倒计时组件（原有）
│   ├── ColorPicker/     # 颜色选择器
│   └── Item/            # 表单项组件
├── locales/             # 国际化文件
└── App.tsx             # 主应用（支持切换）
```

## 使用方法

### 1. 开发环境启动
```bash
# 安装依赖
pnpm install

# 启动开发服务器
pnpm run dev
```

### 2. 构建部署
```bash
# 构建生产版本
pnpm run build

# 预览构建结果
pnpm run preview
```

### 3. 功能切换
- 在应用右上角有切换按钮，可以在"倒计时"和"抽奖"功能间切换
- 抽奖功能完全独立，不影响原有倒计时功能

## 抽奖组件详细说明

### 核心功能流程
1. **初始化**：组件加载时显示配置的抽奖选项
2. **开始抽奖**：点击"开始抽奖"按钮触发动画
3. **动画播放**：选项快速滚动，使用缓动函数逐渐减速
4. **结果确定**：动画结束后随机确定最终结果
5. **结果展示**：显示获奖结果，提供"再来一次"按钮

### 动画实现原理
- 使用 `requestAnimationFrame` 实现流畅的动画效果
- 缓动函数 `easeOut` 让动画逐渐减速，增加真实感
- CSS动画配合JavaScript控制，实现丰富的视觉效果

### 配置参数说明
| 参数 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| options | string[] | ['一等奖', '二等奖', '三等奖', '谢谢参与'] | 抽奖选项列表 |
| duration | number | 3000 | 抽奖持续时间（毫秒） |
| animationSpeed | number | 100 | 动画速度（毫秒） |
| title | string | '幸运抽奖' | 抽奖标题 |
| buttonText | string | '开始抽奖' | 按钮文字 |
| showTitle | boolean | true | 是否显示标题 |
| showStartButton | boolean | true | 是否显示开始按钮 |
| color | string | 'var(--ccm-chart-N700)' | 主题颜色 |

## 样式特性

### 动画效果
- **脉冲动画**：抽奖过程中的选项会有脉冲效果
- **发光效果**：结果展示时有发光动画
- **弹跳动画**：结果文字有弹跳效果
- **渐变背景**：使用CSS渐变营造视觉层次

### 响应式设计
- **桌面端**：300px圆形抽奖轮盘
- **平板端**：250px圆形抽奖轮盘
- **手机端**：200px圆形抽奖轮盘

## 飞书集成特性

### 平台集成
- 使用 `@lark-base-open/js-sdk` 与飞书平台深度集成
- 支持飞书主题切换（明暗模式）
- 配置面板自动集成到飞书界面
- 支持自动截图功能（部署后可用）

### 配置管理
- 配置数据自动保存到飞书平台
- 支持配置变更监听和同步
- 与飞书用户权限系统集成

## 扩展建议

### 功能扩展
1. **音效支持**：添加抽奖音效和背景音乐
2. **更多动画**：增加更多抽奖动画效果
3. **数据统计**：记录抽奖历史和统计信息
4. **多轮抽奖**：支持连续多轮抽奖
5. **奖品管理**：集成奖品管理系统

### 技术优化
1. **性能优化**：使用React.memo优化渲染性能
2. **状态管理**：引入Redux或Zustand管理复杂状态
3. **测试覆盖**：添加单元测试和集成测试
4. **类型安全**：完善TypeScript类型定义

## 部署说明

### 飞书插件部署
1. 构建项目：`pnpm run build`
2. 将 `dist` 目录部署到飞书开放平台
3. 配置插件权限和回调地址
4. 在飞书工作台中添加自定义仪表盘

### 注意事项
- 确保 `package.json` 中的 `output` 字段指向正确的部署目录
- 每次更新后需要重新构建和部署
- 测试时建议先在开发环境验证功能完整性

## 总结

这个抽奖插件在原有倒计时功能基础上，提供了完整的抽奖解决方案。通过现代化的技术栈和丰富的动画效果，为用户提供了优秀的交互体验。同时，与飞书平台的深度集成确保了在企业环境中的良好可用性。

插件支持高度自定义，可以根据具体需求调整抽奖选项、动画效果和界面样式，是一个功能完整、易于扩展的飞书插件解决方案。
